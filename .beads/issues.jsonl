{"id":"bd-1","title":"Test simple file creation","description":"Create a simple test file to verify Claude Code execution works","acceptance_criteria":"- File created successfully\\n- Content is correct\\n- Agent reports completion","status":"in_progress","priority":0,"issue_type":"task","created_at":"2025-10-23T21:59:32.267404-05:00","updated_at":"2025-10-23T22:00:23.236946-05:00"}
{"id":"vc-1","title":"Test task for executor","description":"","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-10-23T19:25:21.279817-05:00","updated_at":"2025-10-23T20:54:48.113589-05:00"}
{"id":"vc-10","title":"E2E CLI test issue","description":"Testing all 11 converted AI functions","status":"open","priority":1,"issue_type":"task","created_at":"2025-10-23T23:46:53.52476-05:00","updated_at":"2025-10-23T23:46:53.52476-05:00"}
{"id":"vc-11","title":"Design pluggable AI provider abstraction interface","description":"Create an abstraction layer that allows switching between Claude CLI and Anthropic API implementations. This is blocking all other abstraction work.\n\nPROBLEM: Current implementation hardcoded Claude CLI calls, replacing all Anthropic API usage. Cannot merge without breaking API-based workflows.\n\nREQUIREMENTS:\n- Define AIProvider interface with methods: Assess, Analyze, Plan, Review, Recover, Summarize\n- Each method returns (text, inputTokens, outputTokens, error)\n- Interface should support context, retries, circuit breaker\n- Must be compatible with existing Supervisor struct\n\nDESIGN CONSIDERATIONS:\n- Keep retry logic in Supervisor (shared between providers)\n- Providers should be stateless or minimal state\n- Support configuration via environment variables or config struct\n- Consider cost tracking per provider type","design":"Complete design documented in AI_PROVIDER_ABSTRACTION_DESIGN.md\n\nSUMMARY:\n- AIProvider interface with Invoke(ctx, params) method\n- InvokeParams struct: Operation, Prompt, MaxTokens, Model\n- InvokeResult struct: Text, InputTokens, OutputTokens\n- Two implementations: AnthropicAPIProvider, ClaudeCLIProvider\n- Configuration via VC_AI_PROVIDER env var (api|cli, default: api)\n- Supervisor delegates to provider, handles retry and parsing\n- Backwards compatible, defaults to API provider\n\nFILES:\n- New: internal/ai/provider_anthropic.go (API provider)\n- New: internal/ai/provider_claude_cli.go (CLI provider, refactored from claude_cli.go)\n- Modified: internal/ai/supervisor.go (use provider instead of client)\n- Modified: All 11 AI functions (delegate to provider.Invoke)\n\nSee AI_PROVIDER_ABSTRACTION_DESIGN.md for complete design, examples, and migration guide.","notes":"Design complete and reviewed. Ready for implementation. Next: vc-12 (API provider) and vc-13 (CLI provider) can be implemented in parallel.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-10-24T00:03:03.198581-05:00","updated_at":"2025-10-24T10:02:18.656184-05:00","closed_at":"2025-10-24T10:02:18.656184-05:00"}
{"id":"vc-12","title":"Implement AnthropicAPIProvider","description":"Implement AIProvider interface for Anthropic API.\n\nSCOPE:\n- Restore original API-based implementation as a provider\n- Extract API calling code from assessment.go, analysis.go, planning.go, etc.\n- Move to new file: internal/ai/provider_anthropic.go\n- Support all 11 supervisor functions via API\n\nFUNCTIONS TO MIGRATE:\n1. AssessIssueState (assessment.go)\n2. AssessCompletion (assessment.go)\n3. AnalyzeExecution (analysis.go)\n4. SuggestRecoveryStrategy (recovery.go)\n5. AnalyzeCodeQuality (code_review.go)\n6. AnalyzeTestCoverage (code_review.go)\n7. GeneratePlan (planning.go)\n8. RefinePhase (planning.go)\n9. SummarizeAgentOutput (utils.go)\n10. DraftClarifyingQuestions (utils.go)\n11. TruncateWithAI (utils.go)\n\nDEPENDENCIES: Blocked by vc-11 (interface design)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-24T00:03:12.973384-05:00","updated_at":"2025-10-24T09:35:44.274747-05:00","closed_at":"2025-10-24T09:35:44.274747-05:00","dependencies":[{"issue_id":"vc-12","depends_on_id":"vc-11","type":"blocks","created_at":"2025-10-24T00:04:17.116737-05:00","created_by":"travisbrown"}]}
{"id":"vc-13","title":"Implement ClaudeCLIProvider","description":"Implement AIProvider interface for Claude CLI.\n\nSCOPE:\n- Keep current CLI implementation but wrap in provider interface\n- Move claude_cli.go functions into provider_claude_cli.go\n- Support all 11 supervisor functions via CLI\n\nEXISTING CODE TO WRAP:\n- invokeClaudeCLI() - core CLI invocation\n- invokeCLIWithRetry() - retry wrapper\n- getModelForCLI() - model mapping\n- ClaudeCLIResponse struct\n\nNEW RESPONSIBILITIES:\n- Implement AIProvider interface methods\n- Each method builds appropriate prompt and calls CLI\n- Handle model mapping (sonnet/haiku/opus)\n- Parse JSON responses and extract tokens\n\nDEPENDENCIES: Blocked by vc-11 (interface design)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-24T00:03:20.141834-05:00","updated_at":"2025-10-24T09:38:35.167548-05:00","closed_at":"2025-10-24T09:38:35.167548-05:00","dependencies":[{"issue_id":"vc-13","depends_on_id":"vc-11","type":"blocks","created_at":"2025-10-24T00:04:17.126398-05:00","created_by":"travisbrown"}]}
{"id":"vc-14","title":"Add provider selection configuration","description":"Add configuration mechanism to select AI provider at runtime.\n\nCONFIGURATION OPTIONS:\n\nOption A - Environment Variable:\n  VC_AI_PROVIDER=api|cli (default: api)\n  \nOption B - Config Struct:\n  type Config struct {\n    Provider string // 'api' or 'cli'\n    APIKey string   // for API provider\n    // ... existing fields\n  }\n\nOption C - Per-Function Override:\n  Allow specifying provider per supervisor function\n  Example: Use CLI for expensive operations, API for cheap ones\n\nRECOMMENDATION: Start with Option A (env var), add Option C later if needed.\n\nBACKWARDS COMPATIBILITY:\n- Default to API provider (existing behavior)\n- CLI provider opt-in via VC_AI_PROVIDER=cli\n- API key still required for API provider\n- API key optional for CLI provider (as currently implemented)\n\nDEPENDENCIES: Blocked by vc-11, vc-12, vc-13","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-24T00:03:28.738126-05:00","updated_at":"2025-10-24T09:43:33.332896-05:00","closed_at":"2025-10-24T09:43:33.332896-05:00","dependencies":[{"issue_id":"vc-14","depends_on_id":"vc-11","type":"blocks","created_at":"2025-10-24T00:04:17.13557-05:00","created_by":"travisbrown"},{"issue_id":"vc-14","depends_on_id":"vc-12","type":"blocks","created_at":"2025-10-24T00:04:17.144637-05:00","created_by":"travisbrown"},{"issue_id":"vc-14","depends_on_id":"vc-13","type":"blocks","created_at":"2025-10-24T00:04:17.154496-05:00","created_by":"travisbrown"}]}
{"id":"vc-15","title":"Update Supervisor to use provider abstraction","description":"Refactor Supervisor to delegate to AIProvider instead of direct API/CLI calls.\n\nCHANGES REQUIRED:\n\n1. Supervisor struct:\n   - Remove: client *anthropic.Client\n   - Add: provider AIProvider\n   \n2. NewSupervisor():\n   - Based on config/env, instantiate correct provider\n   - Pass provider to Supervisor\n   \n3. All AI functions (11 total):\n   - Remove direct API/CLI calls\n   - Call provider.Method() instead\n   - Keep prompt building logic in supervisor\n   - Keep response parsing in supervisor\n   \n4. Files to modify:\n   - supervisor.go (struct, constructor)\n   - assessment.go (2 functions)\n   - analysis.go (1 function)\n   - recovery.go (1 function)\n   - code_review.go (2 functions)\n   - planning.go (2 functions)\n   - utils.go (3 functions)\n\nBACKWARDS COMPATIBILITY:\n- Must work with both providers\n- Existing tests should pass with API provider\n- CLI-specific tests use CLI provider\n\nDEPENDENCIES: Blocked by vc-11, vc-12, vc-13, vc-14","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-24T00:03:37.292937-05:00","updated_at":"2025-10-24T10:01:53.83652-05:00","closed_at":"2025-10-24T10:01:53.83652-05:00","dependencies":[{"issue_id":"vc-15","depends_on_id":"vc-14","type":"blocks","created_at":"2025-10-24T00:04:20.862141-05:00","created_by":"travisbrown"}]}
{"id":"vc-16","title":"Restore API-based tests and add provider-agnostic tests","description":"Fix test failures caused by CLI conversion and add provider selection to tests.\n\nPROBLEMS TO FIX:\n\n1. Skipped tests (currently marked obsolete):\n   - TestAssessCompletion_ErrorHandling (completion_test.go)\n   - TestSummarizeAgentOutput_ErrorHandling (summarization_test.go)\n   - These tests expected API key validation, which CLI doesn't do\n   \n2. Test strategy:\n   - Tests should work with BOTH providers\n   - Use VC_AI_PROVIDER env var to select provider in tests\n   - Default to API provider for existing tests\n   - Add CLI-specific tests separately\n\nSOLUTIONS:\n\nOption A - Restore tests for API provider:\n  - Un-skip the error handling tests\n  - Only run them when VC_AI_PROVIDER=api (or unset)\n  - Skip them when VC_AI_PROVIDER=cli\n  \nOption B - Make tests provider-agnostic:\n  - Test with mock provider that simulates both behaviors\n  - Separate unit tests for each provider\n  \nRECOMMENDATION: Use Option A for quick fix, refactor to Option B later.\n\nFILES TO UPDATE:\n- completion_test.go\n- summarization_test.go\n- Add test helpers for provider selection\n\nDEPENDENCIES: Blocked by vc-15","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-24T00:03:48.773081-05:00","updated_at":"2025-10-24T10:38:53.779808-05:00","closed_at":"2025-10-24T10:38:53.779808-05:00","dependencies":[{"issue_id":"vc-16","depends_on_id":"vc-15","type":"blocks","created_at":"2025-10-24T00:04:20.872429-05:00","created_by":"travisbrown"}]}
{"id":"vc-17","title":"Clean up temporary test files and documentation","description":"Remove temporary files created during CLI integration testing.\n\nFILES TO REMOVE:\n- manual_test_cli.go (269 lines, compilation errors, not used)\n- manual_test_cli_simple.go (288 lines, compilation errors, not used)\n- test_e2e_cli.sh (231 lines, commands don't exist, not used)\n- hello.txt (test artifact)\n- test-recovery.txt (test artifact)\n- test_file.txt (test artifact)\n\nFILES TO REVIEW (may keep or refactor):\n- E2E_TEST_RESULTS.md (309 lines) - useful documentation but duplicates other docs\n- CLAUDE_CODE_MAX_INTEGRATION.md (592 lines) - planning doc, may archive\n- AI_SUPERVISION.md (231 lines) - may merge with existing docs\n\nDECISION CRITERIA:\n- Keep if provides unique value for future maintenance\n- Remove if redundant with code comments or other docs\n- Archive (move to docs/ or archive/) if historical value\n\nRECOMMENDATION:\n- Remove all test artifacts and failed test scripts\n- Keep E2E_TEST_RESULTS.md as reference for now\n- Move planning docs to docs/archive/ or similar\n\nDEPENDENCIES: Should wait until provider abstraction is complete (vc-15)","status":"closed","priority":3,"issue_type":"task","created_at":"2025-10-24T00:04:00.393718-05:00","updated_at":"2025-10-24T10:50:08.851996-05:00","closed_at":"2025-10-24T10:50:08.851996-05:00","dependencies":[{"issue_id":"vc-17","depends_on_id":"vc-15","type":"blocks","created_at":"2025-10-24T00:04:20.882554-05:00","created_by":"travisbrown"}]}
{"id":"vc-18","title":"Add documentation for provider selection","description":"Document how to configure and use different AI providers.\n\nDOCUMENTATION NEEDED:\n\n1. README or USAGE.md updates:\n   - Explain two provider options (API vs CLI)\n   - When to use each (API: pay-per-use, CLI: Max plan unlimited)\n   - Configuration via environment variables\n   - Cost implications\n\n2. Code comments:\n   - Document AIProvider interface thoroughly\n   - Explain provider selection logic in NewSupervisor\n   - Add examples of provider usage\n\n3. Migration guide:\n   - How to switch from API to CLI (set VC_AI_PROVIDER=cli)\n   - How to set up Claude CLI (path to ~/.claude/local/claude)\n   - Troubleshooting common issues\n\nEXAMPLE CONTENT:\n\n## AI Provider Configuration\n\nVC supports two AI providers for supervision:\n\n### Anthropic API (Default)\n- **Use when:** You don't have Claude Code Max subscription\n- **Billing:** Pay-per-token via Anthropic API\n- **Setup:** Set ANTHROPIC_API_KEY environment variable\n- **Model:** Configurable via --model flag\n\n### Claude CLI (Max Plan)\n- **Use when:** You have Claude Code Max unlimited subscription  \n- **Billing:** Free (uses Max plan quota)\n- **Setup:** Set VC_AI_PROVIDER=cli, ensure ~/.claude/local/claude exists\n- **Model:** Automatically maps to CLI aliases (sonnet/haiku/opus)\n\nDEPENDENCIES: Blocked by vc-15 (needs working implementation to document)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-24T00:04:12.127937-05:00","updated_at":"2025-10-24T11:16:11.904533-05:00","closed_at":"2025-10-24T11:16:11.904533-05:00","dependencies":[{"issue_id":"vc-18","depends_on_id":"vc-15","type":"blocks","created_at":"2025-10-24T00:04:20.892051-05:00","created_by":"travisbrown"}]}
{"id":"vc-19","title":"Test provider abstraction E2E","description":"Simple test task to verify the AI supervision workflow works end-to-end with the new provider abstraction. This should be completed by the AI supervisor.","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-24T11:23:51.033101-05:00","updated_at":"2025-10-24T11:23:51.033101-05:00"}
{"id":"vc-2","title":"Test Claude Code integration","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-23T21:51:14.679856-05:00","updated_at":"2025-10-23T21:52:07.754952-05:00","closed_at":"2025-10-23T21:52:07.754952-05:00"}
{"id":"vc-3","title":"Simple echo test","description":"Echo hello world to verify agent execution","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-23T21:52:07.763884-05:00","updated_at":"2025-10-23T21:58:43.662408-05:00","closed_at":"2025-10-23T21:58:43.662408-05:00"}
{"id":"vc-4","title":"Test full execution cycle","description":"Verify Claude Code completes a simple task","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-23T21:58:43.672694-05:00","updated_at":"2025-10-23T22:00:30.304799-05:00","closed_at":"2025-10-23T22:00:30.304799-05:00"}
{"id":"vc-5","title":"Create hello.txt file","description":"Create a file called hello.txt containing the text 'Hello World'","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-23T22:06:59.479084-05:00","updated_at":"2025-10-23T22:39:02.533402-05:00","closed_at":"2025-10-23T22:39:02.533402-05:00","dependencies":[{"issue_id":"vc-5","depends_on_id":"vc-5-gate-test","type":"blocks","created_at":"2025-10-23T22:07:29.079594-05:00","created_by":"quality-gates"},{"issue_id":"vc-5","depends_on_id":"vc-5-gate-lint","type":"blocks","created_at":"2025-10-23T22:07:29.080331-05:00","created_by":"quality-gates"}]}
{"id":"vc-5-gate-lint","title":"Quality gate failure: lint for vc-5","description":"The lint quality gate failed when processing issue vc-5.\n\nError: golangci-lint not found in PATH\n\nOutput:\n```\ngolangci-lint is not installed or not in PATH\n```","design":"Fix the lint failures reported above and ensure the gate passes.","acceptance_criteria":"- lint gate passes with zero errors\n- Original issue vc-5 can proceed","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-10-23T22:07:29.079911-05:00","updated_at":"2025-10-23T22:39:02.532742-05:00","closed_at":"2025-10-23T22:39:02.532742-05:00"}
{"id":"vc-5-gate-test","title":"Quality gate failure: test for vc-5","description":"The test quality gate failed when processing issue vc-5.\n\nError: go test failed: exit status 1\n\nOutput:\n```\n# github.com/steveyegge/vc/internal/mission [github.com/steveyegge/vc/internal/mission.test]\ninternal/mission/orchestrator_rollback_test.go:31:12: cannot use store (variable of type *MockStorage) as storage.Storage value in struct literal: *MockStorage does not implement storage.Storage (missing method DeleteOldStoppedInstances)\ninternal/mission/orchestrator_rollback_test.go:118:12: cannot use store (variable of type *MockStorage) as storage.Storage value in struct literal: *MockStorage does not implement storage.Storage (missing method DeleteOldStoppedInstances)\ninternal/mission/orchestrator_test.go:264:17: cannot use store (variable of type *MockStorage) as storage.Storage value in struct literal: *MockStorage does not implement storage.Storage (missing method DeleteOldStoppedInstances)\ninternal/mission/orchestrator_test.go:332:17: cannot use store (variable of type *MockStorage) as storage.Storage value in struct literal: *MockStorage does not implement storage.Storage (missing meth\n... (truncated)\n```","design":"Fix the test failures reported above and ensure the gate passes.","acceptance_criteria":"- test gate passes with zero errors\n- Original issue vc-5 can proceed","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-10-23T22:07:29.079055-05:00","updated_at":"2025-10-23T22:39:02.533236-05:00","closed_at":"2025-10-23T22:39:02.533236-05:00"}
{"id":"vc-6","title":"Test CLI-based gate recovery","description":"Create a test file to trigger gate failures and test Claude CLI recovery","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-23T22:37:30.07155-05:00","updated_at":"2025-10-23T22:41:37.533087-05:00","closed_at":"2025-10-23T22:41:37.533087-05:00"}
{"id":"vc-7","title":"Create test-recovery.txt","description":"Create a file called test-recovery.txt with the text 'Testing CLI recovery'","status":"blocked","priority":2,"issue_type":"task","created_at":"2025-10-23T22:41:37.546579-05:00","updated_at":"2025-10-23T22:42:27.391298-05:00","dependencies":[{"issue_id":"vc-7","depends_on_id":"vc-8","type":"blocks","created_at":"2025-10-23T22:42:27.389898-05:00","created_by":"ai-supervisor"},{"issue_id":"vc-7","depends_on_id":"vc-9","type":"blocks","created_at":"2025-10-23T22:42:27.390535-05:00","created_by":"ai-supervisor"}]}
{"id":"vc-8","title":"Fix undefined os.LookupPath in recovery_test.go","description":"The recovery_test.go file at line 424 references `os.LookupPath` which doesn't exist in the Go standard library. This is causing compilation failures.\n\nLikely need to use `exec.LookPath()` instead, or implement custom path lookup logic.\n\nLocation: internal/gates/recovery_test.go:424:18","design":"Fix the quality gate failure described above","acceptance_criteria":"Gate passes without errors","status":"in_progress","priority":2,"issue_type":"bug","created_at":"2025-10-23T22:42:27.389454-05:00","updated_at":"2025-10-23T22:43:12.734637-05:00"}
{"id":"vc-9","title":"Add DeleteOldStoppedInstances method to MockStorage","description":"MockStorage in mission package tests is missing the DeleteOldStoppedInstances method, causing compilation failures in multiple test files:\n\n- internal/mission/orchestrator_rollback_test.go:31:12\n- internal/mission/orchestrator_rollback_test.go:118:12\n- internal/mission/orchestrator_test.go:264:17\n- internal/mission/orchestrator_test.go:332:17\n\nThe storage.Storage interface was updated to include this method (likely for executor instance cleanup), but the mock wasn't updated.\n\nNeed to add a stub implementation of DeleteOldStoppedInstances to MockStorage.","design":"Fix the quality gate failure described above","acceptance_criteria":"Gate passes without errors","status":"open","priority":2,"issue_type":"bug","created_at":"2025-10-23T22:42:27.390248-05:00","updated_at":"2025-10-23T22:42:27.390248-05:00"}
